(this.webpackJsonpcross_admin=this.webpackJsonpcross_admin||[]).push([[0],{364:function(e,t,a){},507:function(e,t,a){"use strict";a.r(t);var n=a(6),s=a(0),c=a(14),r=a.n(c),o=(a(364),a(591)),i=a(608),l=a(304),j=a(26),b=a(99),u=a(570),d=a(317),O=a(571),h=a(597),x=a(594),m=a(601),f=a(290),p=a(595),g=a(592),v=a(593),k=a(602),w=a(584),y=a(87),C=a.n(y),P=a(272),S=a(273),T=a(320),I=a(318),D=a(8),F=a(275),N=a.n(F),A=a(5),B=a(43),E=a(61),_=a.n(E),L=a(7),J=a.n(L),R=a(561),z=a(62),H=a(569),M=a(280),U=a.n(M),W=a(565),q=a(566),Y=a(567),G=a(568),K=a(27),Q=function(e){Object(T.a)(a,e);var t=Object(I.a)(a);function a(){var e;Object(P.a)(this,a);for(var n=arguments.length,s=new Array(n),c=0;c<n;c++)s[c]=arguments[c];return(e=t.call.apply(t,[this].concat(s))).state={showDialog:!1},e.handleClick=function(){e.setState({showDialog:!0})},e.handleCloseClick=function(){e.setState({showDialog:!1})},e.handleDelete=function(t){t.preventDefault(),e.setState({showDialog:!1});var a=e.props,n=a.dispatchCrudDelete,s=a.startUndoable,c=a.resource,r=a.record,o=a.basePath,i=a.redirect;a.undoable?s(Object(R.c)(c,r.id,r,o,i)):n(c,r.id,r,o,i)},e}return Object(S.a)(a,[{key:"render",value:function(){var e=this.state.showDialog,t=this.props,a=t.label,c=void 0===a?"ra.action.delete":a,r=t.classes,o=void 0===r?{}:r,i=t.className;return Object(n.jsxs)(s.Fragment,{children:[Object(n.jsx)(K.a,{onClick:this.handleClick,label:c,className:J()("ra-delete-button",o.deleteButton,i),children:Object(n.jsx)(_.a,{})},"button"),Object(n.jsxs)(W.a,{fullWidth:!0,open:e,onClose:this.handleCloseClick,"aria-label":"Are you sure?",children:[Object(n.jsx)(q.a,{children:"Are you sure you want to delete this entity?"}),Object(n.jsx)(Y.a,{children:Object(n.jsx)("div",{children:"Your actions will be logged."})}),Object(n.jsxs)(G.a,{children:[Object(n.jsx)(K.a,{onClick:this.handleDelete,label:c,className:J()("ra-delete-button",o.deleteButton,i),children:Object(n.jsx)(_.a,{})},"button"),Object(n.jsx)(K.a,{label:"ra.action.cancel",onClick:this.handleCloseClick,children:Object(n.jsx)(U.a,{})})]})]})]})}}]),a}(s.Component);Q.defaultProps={redirect:"list",undoable:!0};var V=N()(Object(D.c)(null,{startUndoable:z.h,dispatchCrudDelete:R.c}),H.a,Object(A.a)((function(e){return{deleteButton:{color:e.palette.error.main,"&:hover":{backgroundColor:Object(B.fade)(e.palette.error.main,.12),"@media (hover: none)":{backgroundColor:"transparent"}}}}})))(Q),X=function(e){var t=e.basePath;e.data;return Object(n.jsx)(b.a,{children:Object(n.jsx)(u.a,{basePath:t,label:"Back",icon:Object(n.jsx)(C.a,{})})})},Z=function(e){return Object(n.jsx)(d.a,Object(j.a)(Object(j.a)({},e),{},{children:Object(n.jsx)(O.a,{label:"crossings.action.save_and_add",redirect:!1,submitOnEnter:!1,variant:"flat"})}))},$=function(e){return Object(n.jsx)(h.a,Object(j.a)(Object(j.a)({toolbar:Object(n.jsx)(Z,{}),actions:Object(n.jsx)(X,{})},e),{},{children:Object(n.jsxs)(x.a,{children:[Object(n.jsx)(m.a,{source:"id",label:"Switch ID",validate:Object(f.b)()}),Object(n.jsx)(m.a,{source:"crossingFrom",label:"crossingFrom",validate:Object(f.b)()}),Object(n.jsx)(m.a,{source:"crossingTo",label:"crossingTo",validate:Object(f.b)()}),Object(n.jsx)(m.a,{source:"locationName",label:"locationName",validate:Object(f.b)()}),Object(n.jsx)(m.a,{source:"latitude",label:"latitude",validate:Object(f.b)()}),Object(n.jsx)(m.a,{source:"longitude",label:"longitude",validate:Object(f.b)()}),Object(n.jsx)(m.a,{multiline:!0,source:"notes",label:"notes"})]})}))},ee=function(e){return Object(n.jsx)(p.a,Object(j.a)(Object(j.a)({actions:Object(n.jsx)(X,{}),title:"Post Edit"},e),{},{children:Object(n.jsxs)(x.a,{children:[Object(n.jsx)(m.a,{disabled:!0,label:"switchID",source:"id"}),Object(n.jsx)(m.a,{source:"crossingFrom",label:"crossingFrom",validate:Object(f.b)()}),Object(n.jsx)(m.a,{source:"crossingTo",label:"crossingTo",validate:Object(f.b)()}),Object(n.jsx)(m.a,{source:"locationName",label:"locationName",validate:Object(f.b)()}),Object(n.jsx)(m.a,{source:"latitude",label:"latitude",validate:Object(f.b)()}),Object(n.jsx)(m.a,{source:"longitude",label:"longitude",validate:Object(f.b)()}),Object(n.jsx)(m.a,{multiline:!0,source:"notes",label:"notes"})]})}))},te=function(e){return Object(n.jsx)(g.a,Object(j.a)(Object(j.a)({},e),{},{children:Object(n.jsxs)(v.a,{children:[Object(n.jsx)(k.a,{source:"id",label:"Id"}),Object(n.jsx)(k.a,{source:"crossingFrom",label:"CrossingFrom"}),Object(n.jsx)(k.a,{source:"crossingTo",label:"CrossingTo"}),Object(n.jsx)(k.a,{source:"locationName",label:"LocationName"}),Object(n.jsx)(k.a,{source:"latitude",label:"Latitude"}),Object(n.jsx)(k.a,{source:"longitude",label:"Longitude"}),Object(n.jsx)(k.a,{source:"notes",label:"Notes"}),Object(n.jsx)(w.a,{}),Object(n.jsx)(V,{})]})}))},ae=a(596),ne=(a(606),function(e){var t=e.basePath;e.data;return Object(n.jsx)(b.a,{children:Object(n.jsx)(u.a,{basePath:t,label:"Back",icon:Object(n.jsx)(C.a,{})})})}),se=function(e){return Object(n.jsx)(d.a,Object(j.a)(Object(j.a)({},e),{},{children:Object(n.jsx)(O.a,{label:"crossings.action.save_and_add",redirect:!1,submitOnEnter:!1,variant:"flat"})}))},ce=function(e){return Object(n.jsx)(h.a,Object(j.a)(Object(j.a)({toolbar:Object(n.jsx)(se,{}),actions:Object(n.jsx)(ne,{})},e),{},{children:Object(n.jsxs)(x.a,{children:[Object(n.jsx)(m.a,{source:"username",label:"Email",validate:Object(f.b)()}),Object(n.jsx)(m.a,{source:"password",label:"Password",validate:Object(f.b)()}),Object(n.jsx)(ae.a,{source:"role",choices:[{id:"Admin",name:"Admin"},{id:"Switch Installer",name:"Switch Installer"}]})]})}))},re=function(e){return Object(n.jsx)(g.a,Object(j.a)(Object(j.a)({},e),{},{children:Object(n.jsxs)(v.a,{children:[Object(n.jsx)(k.a,{label:"Email",source:"id"}),Object(n.jsx)(k.a,{label:"Role",source:"role"}),Object(n.jsx)(V,{})]})}))},oe=a(575),ie=a(588),le=a(589),je=a(576),be=a.p+"static/media/logoRed.dacd7a0c.png",ue=function(){return Object(n.jsx)(oe.a,{children:Object(n.jsxs)(ie.a,{children:[Object(n.jsx)(le.a,{style:{justifyContent:"center",display:"flex"},children:Object(n.jsx)("img",{src:be})}),Object(n.jsx)(je.a,{children:"Welcome to the CROSS administration"})]})})},de=a(109),Oe=a.n(de),he=a(163),xe=a(301),me={login:function(){var e=Object(he.a)(Oe.a.mark((function e(t){var a,n,s;return Oe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.username,n=t.password,s=new Request("http://ec2-3-128-142-138.us-east-2.compute.amazonaws.com:3001/authenticate",{method:"POST",body:JSON.stringify({username:a,password:n}),headers:new Headers({"Content-Type":"application/json"})}),e.abrupt("return",fetch(s).then((function(e){if(e.status<200||e.status>=300)throw new Error(e.statusText);return e.json()})).then((function(e){var t=e.token,a=Object(xe.a)(t);localStorage.setItem("token",t),localStorage.setItem("permissions",a.permissions)})));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),logout:function(){return localStorage.removeItem("token"),localStorage.removeItem("permissions"),Promise.resolve()},checkError:function(e){},checkAuth:function(){return localStorage.getItem("token")?Promise.resolve():Promise.reject()},getPermissions:function(){var e=localStorage.getItem("permissions");return console.log(e),e?Promise.resolve(e):Promise.reject()}},fe=a(316),pe=a(302),ge=a.n(pe),ve=Object(fe.a)({palette:{primary:{main:"#b43f3f"},secondary:{main:"#b43f3f"},error:ge.a,contrastThreshold:3,tonalOffset:.2},typography:{fontFamily:["-apple-system","BlinkMacSystemFont",'"Segoe UI"',"Arial","sans-serif"].join(",")},overrides:{MuiButton:{root:{color:"white"}}}}),ke=a(600),we=a.p+"static/media/background.af3a3cc5.jpg",ye=Object(A.a)({card:{padding:"15px 0 15px 0"},icon:{background:"#b43f3f"}})((function(e){return Object(n.jsx)(ke.a,Object(j.a)({backgroundImage:we},e))})),Ce=a(141),Pe=function(){var e=Object(he.a)(Oe.a.mark((function e(t){var a,n,s,c,r,o,i,l,b,u,d=arguments;return Oe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=d.length>1&&void 0!==d[1]?d[1]:{},(n=a.headers||new Headers({Accept:"application/json"})).has("Content-Type")||a&&a.body&&a.body instanceof FormData||n.set("Content-Type","application/json"),a.user&&a.user.authenticated&&a.user.token&&n.set("Authorization",a.user.token),e.next=6,fetch(t,Object(j.a)(Object(j.a)({},a),{},{headers:n}));case 6:return s=e.sent,e.next=9,s.text();case 9:c=e.sent,r={status:s.status,statusText:s.statusText,headers:s.headers,body:c},o=r.status,i=r.statusText,l=r.headers,b=r.body;try{u=JSON.parse(b)}catch(O){}if(!(o<200||o>=300)){e.next=15;break}return e.abrupt("return",Promise.reject(new Ce.a(u&&u.error&&u.error.message||i,o,u)));case 15:return e.abrupt("return",Promise.resolve({status:o,headers:l,body:b,json:u}));case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Se=(a(479),a(206)),Te=function(e){Se.NotificationManager.error(e.message,e.name,3e3)},Ie=Object(l.a)("http://ec2-3-128-142-138.us-east-2.compute.amazonaws.com:3001",(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.headers||(t.headers=new Headers({Accept:"application/json"}));var a=localStorage.getItem("token");return t.headers.set("auth_token",a),Pe(e,t).catch((function(e){Te(e)}))})),De=function(){return Object(n.jsx)(o.a,{loginPage:ye,dashboard:ue,dataProvider:Ie,authProvider:me,theme:ve,children:function(e){return[Object(n.jsx)(i.a,{name:"crossings",list:te,edit:ee,create:$}),"Admin"===e?Object(n.jsx)(i.a,{name:"administrator",list:re,create:ce}):null,Object(n.jsx)("div",{children:Object(n.jsx)(Se.NotificationContainer,{})})]}})},Fe=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,609)).then((function(t){var a=t.getCLS,n=t.getFID,s=t.getFCP,c=t.getLCP,r=t.getTTFB;a(e),n(e),s(e),c(e),r(e)}))};r.a.render(Object(n.jsx)(De,{}),document.getElementById("root")),Fe()}},[[507,1,2]]]);
//# sourceMappingURL=main.b345a99e.chunk.js.map