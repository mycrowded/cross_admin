(this.webpackJsonpcross_admin=this.webpackJsonpcross_admin||[]).push([[0],{385:function(e,t,a){},517:function(e,t,a){"use strict";a.r(t);var s=a(7),n=a(0),c=a(14),r=a.n(c),o=(a(385),a(599)),i=a(598),l=a(324),j=a(28),b=a(106),u=a(577),d=a(336),O=a(578),h=a(605),x=a(602),m=a(610),f=a(308),g=a(603),p=a(600),v=a(601),k=a(611),w=a(591),y=a(92),C=a.n(y),P=a(289),S=a(290),T=a(339),I=a(337),D=a(8),F=a(291),N=a.n(F),A=a(5),B=a(46),E=a(66),_=a.n(E),L=a(6),J=a.n(L),R=a(568),H=a(51),M=a(576),U=a(296),W=a.n(U),q=a(572),z=a(573),Y=a(574),G=a(575),K=a(27),Q=function(e){Object(T.a)(a,e);var t=Object(I.a)(a);function a(){var e;Object(P.a)(this,a);for(var s=arguments.length,n=new Array(s),c=0;c<s;c++)n[c]=arguments[c];return(e=t.call.apply(t,[this].concat(n))).state={showDialog:!1},e.handleClick=function(){e.setState({showDialog:!0})},e.handleCloseClick=function(){e.setState({showDialog:!1})},e.handleDelete=function(t){t.preventDefault(),e.setState({showDialog:!1});var a=e.props,s=a.dispatchCrudDelete,n=a.startUndoable,c=a.resource,r=a.record,o=a.basePath,i=a.redirect;a.undoable?n(Object(R.c)(c,r.id,r,o,i)):s(c,r.id,r,o,i)},e}return Object(S.a)(a,[{key:"render",value:function(){var e=this.state.showDialog,t=this.props,a=t.label,c=void 0===a?"ra.action.delete":a,r=t.classes,o=void 0===r?{}:r,i=t.className;return Object(s.jsxs)(n.Fragment,{children:[Object(s.jsx)(K.a,{onClick:this.handleClick,label:c,className:J()("ra-delete-button",o.deleteButton,i),children:Object(s.jsx)(_.a,{})},"button"),Object(s.jsxs)(q.a,{fullWidth:!0,open:e,onClose:this.handleCloseClick,"aria-label":"Are you sure?",children:[Object(s.jsx)(z.a,{children:"Are you sure you want to delete this entity?"}),Object(s.jsx)(Y.a,{children:Object(s.jsx)("div",{children:"Your actions will be logged."})}),Object(s.jsxs)(G.a,{children:[Object(s.jsx)(K.a,{onClick:this.handleDelete,label:c,className:J()("ra-delete-button",o.deleteButton,i),children:Object(s.jsx)(_.a,{})},"button"),Object(s.jsx)(K.a,{label:"ra.action.cancel",onClick:this.handleCloseClick,children:Object(s.jsx)(W.a,{})})]})]})]})}}]),a}(n.Component);Q.defaultProps={redirect:"list",undoable:!0};var V=N()(Object(D.c)(null,{startUndoable:H.h,dispatchCrudDelete:R.c}),M.a,Object(A.a)((function(e){return{deleteButton:{color:e.palette.error.main,"&:hover":{backgroundColor:Object(B.fade)(e.palette.error.main,.12),"@media (hover: none)":{backgroundColor:"transparent"}}}}})))(Q),X=function(e){var t=e.basePath;e.data;return Object(s.jsx)(b.a,{children:Object(s.jsx)(u.a,{basePath:t,label:"Back",icon:Object(s.jsx)(C.a,{})})})},Z=function(e){return Object(s.jsx)(d.a,Object(j.a)(Object(j.a)({},e),{},{children:Object(s.jsx)(O.a,{label:"crossings.action.save_and_add",redirect:!1,submitOnEnter:!1,variant:"flat"})}))},$=function(e){return Object(s.jsx)(h.a,Object(j.a)(Object(j.a)({toolbar:Object(s.jsx)(Z,{}),actions:Object(s.jsx)(X,{})},e),{},{children:Object(s.jsxs)(x.a,{children:[Object(s.jsx)(m.a,{source:"id",label:"Switch ID",validate:Object(f.b)()}),Object(s.jsx)(m.a,{source:"crossingFrom",label:"crossingFrom",validate:Object(f.b)()}),Object(s.jsx)(m.a,{source:"crossingTo",label:"crossingTo",validate:Object(f.b)()}),Object(s.jsx)(m.a,{source:"locationName",label:"locationName",validate:Object(f.b)()}),Object(s.jsx)(m.a,{source:"latitude",label:"latitude",validate:Object(f.b)()}),Object(s.jsx)(m.a,{source:"longitude",label:"longitude",validate:Object(f.b)()}),Object(s.jsx)(m.a,{multiline:!0,source:"notes",label:"notes"})]})}))},ee=function(e){return Object(s.jsx)(g.a,Object(j.a)(Object(j.a)({actions:Object(s.jsx)(X,{}),title:"Post Edit"},e),{},{children:Object(s.jsxs)(x.a,{children:[Object(s.jsx)(m.a,{disabled:!0,label:"switchID",source:"id"}),Object(s.jsx)(m.a,{source:"crossingFrom",label:"crossingFrom",validate:Object(f.b)()}),Object(s.jsx)(m.a,{source:"crossingTo",label:"crossingTo",validate:Object(f.b)()}),Object(s.jsx)(m.a,{source:"locationName",label:"locationName",validate:Object(f.b)()}),Object(s.jsx)(m.a,{source:"latitude",label:"latitude",validate:Object(f.b)()}),Object(s.jsx)(m.a,{source:"longitude",label:"longitude",validate:Object(f.b)()}),Object(s.jsx)(m.a,{multiline:!0,source:"notes",label:"notes"})]})}))},te=function(e){return Object(s.jsx)(p.a,Object(j.a)(Object(j.a)({},e),{},{children:Object(s.jsxs)(v.a,{children:[Object(s.jsx)(k.a,{source:"id",label:"Id"}),Object(s.jsx)(k.a,{source:"crossingFrom",label:"CrossingFrom"}),Object(s.jsx)(k.a,{source:"crossingTo",label:"CrossingTo"}),Object(s.jsx)(k.a,{source:"locationName",label:"LocationName"}),Object(s.jsx)(k.a,{source:"latitude",label:"Latitude"}),Object(s.jsx)(k.a,{source:"longitude",label:"Longitude"}),Object(s.jsx)(k.a,{source:"notes",label:"Notes"}),Object(s.jsx)(w.a,{}),Object(s.jsx)(V,{})]})}))},ae=a(604),se=(a(614),function(e){var t=e.basePath;e.data;return Object(s.jsx)(b.a,{children:Object(s.jsx)(u.a,{basePath:t,label:"Back",icon:Object(s.jsx)(C.a,{})})})}),ne=function(e){return Object(s.jsx)(d.a,Object(j.a)(Object(j.a)({},e),{},{children:Object(s.jsx)(O.a,{label:"crossings.action.save_and_add",redirect:!1,submitOnEnter:!1,variant:"flat"})}))},ce=function(e){return Object(s.jsx)(h.a,Object(j.a)(Object(j.a)({toolbar:Object(s.jsx)(ne,{}),actions:Object(s.jsx)(se,{})},e),{},{children:Object(s.jsxs)(x.a,{children:[Object(s.jsx)(m.a,{source:"username",label:"Email",validate:Object(f.b)()}),Object(s.jsx)(m.a,{source:"password",label:"Password",validate:Object(f.b)()}),Object(s.jsx)(ae.a,{source:"role",choices:[{id:"Admin",name:"Admin"},{id:"Switch Installer",name:"Switch Installer"}]})]})}))},re=function(e){return Object(s.jsx)(p.a,Object(j.a)(Object(j.a)({},e),{},{children:Object(s.jsxs)(v.a,{children:[Object(s.jsx)(k.a,{label:"Email",source:"id"}),Object(s.jsx)(k.a,{label:"Role",source:"role"}),Object(s.jsx)(V,{})]})}))},oe=a(584),ie=a(595),le=a(596),je=a(585),be=a.p+"static/media/logoRed.dacd7a0c.png",ue=function(){return Object(s.jsx)(oe.a,{children:Object(s.jsxs)(ie.a,{children:[Object(s.jsx)(le.a,{style:{justifyContent:"center",display:"flex"},children:Object(s.jsx)("img",{src:be})}),Object(s.jsx)(je.a,{children:"Welcome to the CROSS administration"})]})})},de=a(115),Oe=a.n(de),he=a(174),xe=a(321),me={login:function(){var e=Object(he.a)(Oe.a.mark((function e(t){var a,s,n;return Oe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.username,s=t.password,n=new Request("https://crowdedcross.com/authenticate",{method:"POST",body:JSON.stringify({username:a,password:s}),headers:new Headers({"Content-Type":"application/json"})}),e.abrupt("return",fetch(n).then((function(e){if(e.status<200||e.status>=300)throw new Error(e.statusText);return e.json()})).then((function(e){var t=e.token,a=Object(xe.a)(t);console.log(t),localStorage.setItem("token",t),localStorage.setItem("permissions",a.permissions)})));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),logout:function(){return localStorage.removeItem("token"),localStorage.removeItem("permissions"),Promise.resolve()},checkError:function(e){},checkAuth:function(){return localStorage.getItem("token")?Promise.resolve():Promise.reject()},getPermissions:function(){var e=localStorage.getItem("permissions");return e?Promise.resolve(e):Promise.reject()}},fe=a(222),ge=a(322),pe=a.n(ge),ve=Object(fe.b)({palette:{primary:{main:"#b43f3f"},secondary:{main:"#b43f3f"},error:pe.a,contrastThreshold:3,tonalOffset:.2},typography:{fontFamily:["-apple-system","BlinkMacSystemFont",'"Segoe UI"',"Arial","sans-serif"].join(",")},overrides:{MuiButton:{root:{color:"white"}}}}),ke=a(609),we=a.p+"static/media/background.af3a3cc5.jpg",ye=Object(A.a)({card:{padding:"15px 0 15px 0"},icon:{background:"#b43f3f"}})((function(e){return Object(s.jsx)(ke.a,Object(j.a)({backgroundImage:we},e))})),Ce=a(151),Pe=function(){var e=Object(he.a)(Oe.a.mark((function e(t){var a,s,n,c,r,o,i,l,b,u,d=arguments;return Oe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=d.length>1&&void 0!==d[1]?d[1]:{},(s=a.headers||new Headers({Accept:"application/json"})).has("Content-Type")||a&&a.body&&a.body instanceof FormData||s.set("Content-Type","application/json"),a.user&&a.user.authenticated&&a.user.token&&s.set("Authorization",a.user.token),e.next=6,fetch(t,Object(j.a)(Object(j.a)({},a),{},{headers:s}));case 6:return n=e.sent,e.next=9,n.text();case 9:c=e.sent,r={status:n.status,statusText:n.statusText,headers:n.headers,body:c},o=r.status,i=r.statusText,l=r.headers,b=r.body;try{u=JSON.parse(b)}catch(O){}if(!(o<200||o>=300)){e.next=15;break}return e.abrupt("return",Promise.reject(new Ce.a(u&&u.error&&u.error.message||i,o,u)));case 15:return e.abrupt("return",Promise.resolve({status:o,headers:l,body:b,json:u}));case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Se=(a(489),a(220)),Te=function(e){Se.NotificationManager.error(e.message,e.name,3e3)},Ie=Object(l.a)("https://crowdedcross.com",(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.headers||(t.headers=new Headers({Accept:"application/json"}));var a=localStorage.getItem("token");return t.headers.set("auth_token",a),Pe(e,t).catch((function(e){Te(e)}))})),De=function(){return Object(s.jsx)(o.a,{loginPage:ye,dashboard:ue,dataProvider:Ie,authProvider:me,theme:ve,children:function(e){return[Object(s.jsx)(i.a,{name:"crossings",list:te,edit:ee,create:$}),"Admin"===e?Object(s.jsx)(i.a,{name:"administrator",list:re,create:ce}):null,Object(s.jsx)("div",{children:Object(s.jsx)(Se.NotificationContainer,{})})]}})},Fe=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,616)).then((function(t){var a=t.getCLS,s=t.getFID,n=t.getFCP,c=t.getLCP,r=t.getTTFB;a(e),s(e),n(e),c(e),r(e)}))};r.a.render(Object(s.jsx)(De,{}),document.getElementById("root")),Fe()}},[[517,1,2]]]);
//# sourceMappingURL=main.f2a66b3a.chunk.js.map