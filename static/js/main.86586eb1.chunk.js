(this.webpackJsonpcross_admin=this.webpackJsonpcross_admin||[]).push([[0],{387:function(e,t,a){},519:function(e,t,a){"use strict";a.r(t);var c=a(7),n=a(0),s=a(14),r=a.n(s),o=(a(387),a(603)),i=a(602),l=a(326),j=a(28),b=a(105),u=a(580),d=a(338),O=a(581),h=a(609),x=a(606),m=a(342),f=a(308),g=a(607),p=a(604),v=a(605),k=a(614),w=a(594),y=a(91),C=a.n(y),P=a(289),S=a(290),T=a(341),I=a(339),D=a(8),F=a(291),N=a.n(F),A=a(5),B=a(15),E=a(66),_=a.n(E),L=a(6),J=a.n(L),R=a(571),M=a(50),U=a(579),H=a(296),W=a.n(H),q=a(575),z=a(576),Y=a(577),G=a(578),K=a(27),Q=function(e){Object(T.a)(a,e);var t=Object(I.a)(a);function a(){var e;Object(P.a)(this,a);for(var c=arguments.length,n=new Array(c),s=0;s<c;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={showDialog:!1},e.handleClick=function(){e.setState({showDialog:!0})},e.handleCloseClick=function(){e.setState({showDialog:!1})},e.handleDelete=function(t){t.preventDefault(),e.setState({showDialog:!1});var a=e.props,c=a.dispatchCrudDelete,n=a.startUndoable,s=a.resource,r=a.record,o=a.basePath,i=a.redirect;a.undoable?n(Object(R.c)(s,r.id,r,o,i)):c(s,r.id,r,o,i)},e}return Object(S.a)(a,[{key:"render",value:function(){var e=this.state.showDialog,t=this.props,a=t.label,s=void 0===a?"ra.action.delete":a,r=t.classes,o=void 0===r?{}:r,i=t.className;return Object(c.jsxs)(n.Fragment,{children:[Object(c.jsx)(K.a,{onClick:this.handleClick,label:s,className:J()("ra-delete-button",o.deleteButton,i),children:Object(c.jsx)(_.a,{})},"button"),Object(c.jsxs)(q.a,{fullWidth:!0,open:e,onClose:this.handleCloseClick,"aria-label":"Are you sure?",children:[Object(c.jsx)(z.a,{children:"Are you sure you want to delete this entity?"}),Object(c.jsx)(Y.a,{children:Object(c.jsx)("div",{children:"Your actions will be logged."})}),Object(c.jsxs)(G.a,{children:[Object(c.jsx)(K.a,{onClick:this.handleDelete,label:s,className:J()("ra-delete-button",o.deleteButton,i),children:Object(c.jsx)(_.a,{})},"button"),Object(c.jsx)(K.a,{label:"ra.action.cancel",onClick:this.handleCloseClick,children:Object(c.jsx)(W.a,{})})]})]})]})}}]),a}(n.Component);Q.defaultProps={redirect:"list",undoable:!0};var V=N()(Object(D.c)(null,{startUndoable:M.h,dispatchCrudDelete:R.c}),U.a,Object(A.a)((function(e){return{deleteButton:{color:e.palette.error.main,"&:hover":{backgroundColor:Object(B.c)(e.palette.error.main,.12),"@media (hover: none)":{backgroundColor:"transparent"}}}}})))(Q),X=function(e){var t=e.basePath;e.data;return Object(c.jsx)(b.a,{children:Object(c.jsx)(u.a,{basePath:t,label:"Back",icon:Object(c.jsx)(C.a,{})})})},Z=function(e){return Object(c.jsx)(d.a,Object(j.a)(Object(j.a)({},e),{},{children:Object(c.jsx)(O.a,{label:"crossings.action.save_and_add",redirect:!1,submitOnEnter:!1,variant:"flat"})}))},$=function(e){return Object(c.jsx)(h.a,Object(j.a)(Object(j.a)({toolbar:Object(c.jsx)(Z,{}),actions:Object(c.jsx)(X,{})},e),{},{children:Object(c.jsxs)(x.a,{children:[Object(c.jsx)(m.a,{source:"id",label:"Switch ID",validate:Object(f.b)()}),Object(c.jsx)(m.a,{source:"crossingFrom",label:"crossingFrom",validate:Object(f.b)()}),Object(c.jsx)(m.a,{source:"crossingTo",label:"crossingTo",validate:Object(f.b)()}),Object(c.jsx)(m.a,{source:"locationName",label:"locationName",validate:Object(f.b)()}),Object(c.jsx)(m.a,{source:"latitude",label:"latitude",validate:Object(f.b)()}),Object(c.jsx)(m.a,{source:"longitude",label:"longitude",validate:Object(f.b)()}),Object(c.jsx)(m.a,{multiline:!0,source:"notes",label:"notes"})]})}))},ee=function(e){return Object(c.jsx)(g.a,Object(j.a)(Object(j.a)({actions:Object(c.jsx)(X,{}),title:"Post Edit"},e),{},{children:Object(c.jsxs)(x.a,{children:[Object(c.jsx)(m.a,{disabled:!0,label:"switchID",source:"id"}),Object(c.jsx)(m.a,{source:"crossingFrom",label:"crossingFrom",validate:Object(f.b)()}),Object(c.jsx)(m.a,{source:"crossingTo",label:"crossingTo",validate:Object(f.b)()}),Object(c.jsx)(m.a,{source:"locationName",label:"locationName",validate:Object(f.b)()}),Object(c.jsx)(m.a,{source:"latitude",label:"latitude",validate:Object(f.b)()}),Object(c.jsx)(m.a,{source:"longitude",label:"longitude",validate:Object(f.b)()}),Object(c.jsx)(m.a,{multiline:!0,source:"notes",label:"notes"})]})}))},te=function(e){return Object(c.jsx)(p.a,Object(j.a)(Object(j.a)({},e),{},{children:Object(c.jsxs)(v.a,{children:[Object(c.jsx)(k.a,{source:"id",label:"Id"}),Object(c.jsx)(k.a,{source:"crossingFrom",label:"CrossingFrom"}),Object(c.jsx)(k.a,{source:"crossingTo",label:"CrossingTo"}),Object(c.jsx)(k.a,{source:"locationName",label:"LocationName"}),Object(c.jsx)(k.a,{source:"latitude",label:"Latitude"}),Object(c.jsx)(k.a,{source:"longitude",label:"Longitude"}),Object(c.jsx)(k.a,{source:"notes",label:"Notes"}),Object(c.jsx)(w.a,{}),Object(c.jsx)(V,{})]})}))},ae=a(595),ce=a(608),ne=(a(617),function(e){var t=e.basePath;e.data;return Object(c.jsx)(b.a,{children:Object(c.jsx)(u.a,{basePath:t,label:"Back",icon:Object(c.jsx)(C.a,{})})})}),se=function(e){return Object(c.jsx)(d.a,Object(j.a)(Object(j.a)({},e),{},{children:Object(c.jsx)(O.a,{label:"crossings.action.save_and_add",redirect:!1,submitOnEnter:!1,variant:"flat"})}))},re=function(e){return Object(c.jsx)(h.a,Object(j.a)(Object(j.a)({toolbar:Object(c.jsx)(se,{}),actions:Object(c.jsx)(ne,{})},e),{},{children:Object(c.jsxs)(x.a,{children:[Object(c.jsx)(m.a,{source:"username",label:"Email",validate:Object(f.b)()}),Object(c.jsx)(ae.a,{source:"password",label:"Password",validate:Object(f.b)()}),Object(c.jsx)(ce.a,{source:"role",choices:[{id:"Admin",name:"Admin"},{id:"Switch Installer",name:"Switch Installer"}]})]})}))},oe=function(e){return Object(c.jsx)(p.a,Object(j.a)(Object(j.a)({},e),{},{children:Object(c.jsxs)(v.a,{children:[Object(c.jsx)(k.a,{label:"Email",source:"id"}),Object(c.jsx)(k.a,{label:"Role",source:"role"}),Object(c.jsx)(V,{})]})}))},ie=a(587),le=a(599),je=a(600),be=a(588),ue=a.p+"static/media/logoRed.dacd7a0c.png",de=function(){return Object(c.jsx)(ie.a,{children:Object(c.jsxs)(le.a,{children:[Object(c.jsx)(je.a,{style:{justifyContent:"center",display:"flex"},children:Object(c.jsx)("img",{src:ue})}),Object(c.jsx)(be.a,{children:"Welcome to the CROSS administration"})]})})},Oe=a(114),he=a.n(Oe),xe=a(173),me=a(323),fe={login:function(){var e=Object(xe.a)(he.a.mark((function e(t){var a,c,n;return he.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.username,c=t.password,n=new Request("https://crowdedcross.com/authenticate",{method:"POST",body:JSON.stringify({username:a,password:c}),headers:new Headers({"Content-Type":"application/json"})}),e.abrupt("return",fetch(n).then((function(e){if(e.status<200||e.status>=300)throw new Error(e.statusText);return e.json()})).then((function(e){var t=e.token,a=Object(me.a)(t);localStorage.setItem("token",t),localStorage.setItem("permissions",a.permissions)})));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),logout:function(){return localStorage.removeItem("token"),localStorage.removeItem("permissions"),Promise.resolve()},checkError:function(e){},checkAuth:function(){return localStorage.getItem("token")?Promise.resolve():Promise.reject()},getPermissions:function(){var e=localStorage.getItem("permissions");return e?Promise.resolve(e):Promise.reject()}},ge=a(222),pe=a(324),ve=a.n(pe),ke=Object(ge.a)({palette:{primary:{main:"#b43f3f"},secondary:{main:"#b43f3f"},error:ve.a,contrastThreshold:3,tonalOffset:.2},typography:{fontFamily:["-apple-system","BlinkMacSystemFont",'"Segoe UI"',"Arial","sans-serif"].join(",")},overrides:{MuiButton:{root:{color:"white"}}}}),we=a(613),ye=a.p+"static/media/background.af3a3cc5.jpg",Ce=Object(A.a)({card:{padding:"15px 0 15px 0"},icon:{background:"#b43f3f"}})((function(e){return Object(c.jsx)(we.a,Object(j.a)({backgroundImage:ye},e))})),Pe=a(150),Se=function(){var e=Object(xe.a)(he.a.mark((function e(t){var a,c,n,s,r,o,i,l,b,u,d=arguments;return he.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=d.length>1&&void 0!==d[1]?d[1]:{},(c=a.headers||new Headers({Accept:"application/json"})).has("Content-Type")||a&&a.body&&a.body instanceof FormData||c.set("Content-Type","application/json"),a.user&&a.user.authenticated&&a.user.token&&c.set("Authorization",a.user.token),e.next=6,fetch(t,Object(j.a)(Object(j.a)({},a),{},{headers:c}));case 6:return n=e.sent,e.next=9,n.text();case 9:s=e.sent,r={status:n.status,statusText:n.statusText,headers:n.headers,body:s},o=r.status,i=r.statusText,l=r.headers,b=r.body;try{u=JSON.parse(b)}catch(O){}if(!(o<200||o>=300)){e.next=15;break}return e.abrupt("return",Promise.reject(new Pe.a(u&&u.error&&u.error.message||i,o,u)));case 15:return e.abrupt("return",Promise.resolve({status:o,headers:l,body:b,json:u}));case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Te=(a(491),a(220)),Ie=function(e){Te.NotificationManager.error(e.message,e.name,3e3)},De=Object(l.a)("https://crowdedcross.com",(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=localStorage.getItem("token");return t.user={authenticated:!0,token:a},Se(e,t).catch((function(e){Ie(e)}))})),Fe=function(){return Object(c.jsx)(o.a,{loginPage:Ce,dashboard:de,dataProvider:De,authProvider:fe,theme:ke,children:function(e){return[Object(c.jsx)(i.a,{name:"crossings",list:te,edit:ee,create:$}),"Admin"===e?Object(c.jsx)(i.a,{name:"administrator",list:oe,create:re}):null,Object(c.jsx)("div",{children:Object(c.jsx)(Te.NotificationContainer,{})})]}})},Ne=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,619)).then((function(t){var a=t.getCLS,c=t.getFID,n=t.getFCP,s=t.getLCP,r=t.getTTFB;a(e),c(e),n(e),s(e),r(e)}))};r.a.render(Object(c.jsx)(Fe,{}),document.getElementById("root")),Ne()}},[[519,1,2]]]);
//# sourceMappingURL=main.86586eb1.chunk.js.map